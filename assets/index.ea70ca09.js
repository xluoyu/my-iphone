import{r as e,o as t,c as a,a as o,b as n,d as s,e as l,f as c,g as r,D as p,h as i,u,T as d,i as m,j as h,k as v,t as g,w as y,F as k,l as f,p as w,m as b,n as L,q as S,s as A,v as T,x as _,y as x,S as C,P as E,z as M,A as N,B as R,C as B,E as P,G as D,N as H,H as I,I as j,J as O,K as $,L as F,M as V,O as q,Q as Y,R as U,U as W}from"./vendor.23d3c9f1.js";let X;!function(e=".",t="__import__"){try{self[t]=new Function("u","return import(u)")}catch(a){const o=new URL(e,location),n=e=>{URL.revokeObjectURL(e.src),e.remove()};self[t]=e=>new Promise(((a,s)=>{const l=new URL(e,o);if(self[t].moduleMap[l])return a(self[t].moduleMap[l]);const c=new Blob([`import * as m from '${l}';`,`${t}.moduleMap['${l}']=m;`],{type:"text/javascript"}),r=Object.assign(document.createElement("script"),{type:"module",src:URL.createObjectURL(c),onerror(){s(new Error(`Failed to import: ${e}`)),n(r)},onload(){a(self[t].moduleMap[l]),n(r)}});document.head.appendChild(r)})),self[t].moduleMap={}}}("/my-iphone/assets/");const z={},G=function(e,t){if(!t)return e();if(void 0===X){const e=document.createElement("link").relList;X=e&&e.supports&&e.supports("modulepreload")?"modulepreload":"preload"}return Promise.all(t.map((e=>{if(e in z)return;z[e]=!0;const t=e.endsWith(".css"),a=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${a}`))return;const o=document.createElement("link");return o.rel=t?"stylesheet":X,t||(o.as="script",o.crossOrigin=""),o.href=e,document.head.appendChild(o),t?new Promise(((e,t)=>{o.addEventListener("load",e),o.addEventListener("error",t)})):void 0}))).then((()=>e()))},J={};J.render=function(o,n){const s=e("router-view");return t(),a(s)};const Q=e=>{let t=getComputedStyle(document.documentElement).getPropertyValue(e);return t=t.replace("px",""),Number(t)},K=[{path:"",component:J,name:"home"},{path:"/alipay/:child*",component:J,name:"alipay",meta:{type:"app",style:"black"}},{path:"/music/:child*",component:()=>G((()=>__import__("./index.a953440b.js")),["/my-iphone/assets/index.a953440b.js","/my-iphone/assets/vendor.23d3c9f1.js","/my-iphone/assets/vendor.12f70452.css"]),name:"music",meta:{style:"white"}},{path:"/calculator/:child*",component:J,name:"calculator",meta:{type:"app",style:"white"}},{path:"/settings",component:()=>G((()=>__import__("./layout.cdf7226d.js")),["/my-iphone/assets/layout.cdf7226d.js","/my-iphone/assets/layout.394b32c9.css","/my-iphone/assets/vendor.23d3c9f1.js","/my-iphone/assets/vendor.12f70452.css"]),name:"settings",redirect:"/settings/index",children:[{path:"index",component:()=>G((()=>__import__("./home.ee6319a6.js")),["/my-iphone/assets/home.ee6319a6.js","/my-iphone/assets/home.1fee12ab.css","/my-iphone/assets/vendor.23d3c9f1.js","/my-iphone/assets/vendor.12f70452.css"]),meta:{title:"设置",back:!1}},{path:"pwd",component:()=>G((()=>__import__("./pwd.6a6f2589.js")),["/my-iphone/assets/pwd.6a6f2589.js","/my-iphone/assets/vendor.23d3c9f1.js","/my-iphone/assets/vendor.12f70452.css"]),name:"pwd",meta:{title:"安全设置",back:!0}},{path:"setPwd",component:()=>G((()=>__import__("./setPwd.448d6c30.js")),["/my-iphone/assets/setPwd.448d6c30.js","/my-iphone/assets/setPwd.12295097.css","/my-iphone/assets/vendor.23d3c9f1.js","/my-iphone/assets/vendor.12f70452.css"]),name:"setPwd",meta:{back:!0,style:"black"}}]}],Z=o({history:n("/my-iphone/"),routes:K});var ee,te,ae,oe,ne,se,le,ce;Z.beforeEach(((e,t,a)=>{"home"==e.name&&t.name&&history.pushState({back:t.path,current:"/my-iphone/",forward:null,position:null,replaced:!1,scroll:null},"","/my-iphone/"),a()})),(te=ee||(ee={})).App="App",te.Weather="Weather",(oe=ae||(ae={})).defaultApp="defaultApp",oe.customApp="customApp",oe.clock="clock",oe.camera="camera",(se=ne||(ne={})).white="#515151",se.black="#fff",(ce=le||(le={})).Normal="normal",ce.Number="number",ce.Slide="slide";const re={namespaced:!0,state:()=>({lockStatus:!1,lockType:le.Number,lockNumberPwd:"147258"}),mutations:{changeLock(e,t){e.lockStatus=t},changeLockPwd(e,t){e.lockNumberPwd=t},changeLockType(e,t){e.lockType=t}}},pe=[{key:"alipay",type:ee.App,photo:"https://xluoyu.github.io/image-riverbed/iphone/alipay.jpg",name:"支付宝",useType:ae.customApp,status:!0},{key:"weather",type:ee.Weather,name:"天气",status:!0},{key:"settings",type:ee.App,useType:ae.defaultApp,photo:"https://xluoyu.github.io/image-riverbed/iphone/settings.png",name:"设置",status:!0},{key:"safari",type:ee.App,photo:"https://xluoyu.github.io/image-riverbed/iphone/safari.png",name:"Safari 浏览器",useType:ae.defaultApp,status:!1},{key:"photos",type:ee.App,photo:"https://xluoyu.github.io/image-riverbed/iphone/photos.png",name:"photos",useType:ae.defaultApp,status:!1},{key:"phone",type:ee.App,photo:"https://xluoyu.github.io/image-riverbed/iphone/phone.png",name:"phone",useType:ae.defaultApp,status:!1},{key:"appStore",type:ee.App,photo:"https://xluoyu.github.io/image-riverbed/iphone/appStore.png",name:"App Store",useType:ae.defaultApp,status:!1},{key:"music",type:ee.App,photo:"https://xluoyu.github.io/image-riverbed/iphone/music.png",name:"音乐",useType:ae.customApp,status:!0},{key:"camera",type:ee.App,photo:"https://xluoyu.github.io/image-riverbed/iphone/camera.png",name:"camera",useType:ae.camera,status:!0},{key:"calculator",type:ee.App,photo:"https://xluoyu.github.io/image-riverbed/iphone/calculator.png",name:"calculator",useType:ae.defaultApp,status:!1},{key:"messages",type:ee.App,photo:"https://xluoyu.github.io/image-riverbed/iphone/messages.png",name:"messages",useType:ae.defaultApp,status:!1},{key:"clock",type:ee.App,photo:"https://xluoyu.github.io/image-riverbed/iphone/clock.png",name:"锁屏",useType:ae.clock,status:!0}],ie=s({state:()=>({closeBeforeFn:null,appDragStatus:!1,routerHistory:{}}),mutations:{changeCloseBeforeFn(e,t){e.closeBeforeFn=t},changeAppDragStatus(e,t){e.appDragStatus=t},changeRouterHistory(e,t){var a,o,n;let s=e.routerHistory[t.appName];switch(t.type){case"add":if(e.routerHistory[t.appName]){let s=null==(a=e.routerHistory[t.appName])?void 0:a.indexOf(t.value);s&&-1!=s?e.routerHistory[t.appName]=null==(o=e.routerHistory[t.appName])?void 0:o.slice(0,s+1):null==(n=e.routerHistory[t.appName])||n.push(t.value)}else e.routerHistory[t.appName]=[t.value];break;case"remove":s=void 0;break;case"replace":e.routerHistory[t.appName]=[t.value];break;default:null==s||s.push(t.value)}}},actions:{onCloseBrofreFn:async e=>!e.state.closeBeforeFn||await e.state.closeBeforeFn()},modules:{LockStore:re,AppStore:{namespaced:!0,state:()=>({myAppIds:["weather","appStore","photos","music","camera","calculator","clock","alipay"]}),getters:{myAppList:e=>e.myAppIds.map((e=>pe.find((t=>t.key==e))))},mutations:{removeApp(e,t){let a=e.myAppIds.indexOf(t);e.myAppIds.splice(a,1)}}}}}),ue=l(!1),de=l(le.Number),me=l(""),he=()=>({lockStatus:ue,lockType:de,lockPwd:me,changeLockState:e=>{ue.value="boolean"==typeof e?e:!ue.value},setLockPwd:e=>{me.value=e},setLockType:e=>{de.value=e}}),ve=l(!1);let ge=0;const ye=()=>{const e=()=>{ve.value=!ve.value},t=()=>{e()};return{dragStatus:ve,changeDragStatus:e,gotouchstart:e=>{e.stopPropagation(),ve.value||(clearTimeout(ge),ge=window.setTimeout((()=>{ge=0,t()}),600))},gotouchend:()=>{clearTimeout(ge)}}},ke=l(["weather","appStore","photos","music","camera","calculator","clock","alipay"]),fe=()=>{const e=r((()=>ke.value.map((e=>pe.find((t=>t.key==e))))));return{localApp:ke,myApplist:e,clearApp:e=>{p.confirm({message:`确定要卸载${e.name}吗？`}).then((()=>{(e=>{let t=ke.value.indexOf(e);ke.value.splice(t,1)})(e.key)})).catch()}}},we=c({}),be=()=>({appHistory:we,changeRouterHistory:e=>{var t,a,o;let n=we[e.appName];switch(e.type){case"add":if(we[e.appName]){let n=null==(t=we[e.appName])?void 0:t.indexOf(e.value);n&&-1!=n?we[e.appName]=null==(a=we[e.appName])?void 0:a.slice(0,n+1):null==(o=we[e.appName])||o.push(e.value)}else we[e.appName]=[e.value];break;case"remove":n=void 0;break;case"replace":we[e.appName]=[e.value];break;default:null==n||n.push(e.value)}}});var Le=i({props:{app:{type:Object,default:()=>({})}},setup(e){const t=u(),{changeLockState:a}=he(),{dragStatus:o}=ye(),{clearApp:n}=fe(),{appHistory:s}=be();return{open:async()=>{if(o.value)return void n(e.app);if(!e.app.status)return void d("这个还没写/(ㄒoㄒ)/~~");let l=e.app.key;switch(e.app.useType){case ae.clock:a();break;case ae.camera:!function(){let e=document.createElement("input");e.setAttribute("type","file"),e.setAttribute("accept","image/*"),e.setAttribute("capture","environment"),e.addEventListener("change",(()=>{const t=new FileReader;let a=e.files?e.files[0]:null;a&&(t.readAsDataURL(a),t.onload=t=>{document.body.removeChild(e),p.confirm({title:"图片预览",message:()=>{var e;return h("img",{src:null==(e=null==t?void 0:t.target)?void 0:e.result,style:{width:"100%"}})},confirmButtonText:"保存",cancelButtonText:"取消"}).then((()=>{d.success("保存成功")})).catch()})})),document.body.append(e),e.click()}();break;default:e.app.useType==ae.customApp&&await(c=e.app.key,new Promise((e=>{m([{name:c,entry:"http://192.168.0.184:1921",container:"#routerView",activeRule:"/my-iphone/"+c,props:{slogan:"Hello Qiankun",baseRoute:"/my-iphone/"}}]),e()})));let o=s[l]?s[l]:[];o&&o.length?o.forEach((e=>{requestAnimationFrame((()=>{t.push(e)}))})):t.push({name:l})}var c}}}});const Se=y()(((e,o,n,s,l,c)=>(t(),a("div",{class:"app",id:e.app.key,onClick:o[1]||(o[1]=(...t)=>e.open&&e.open(...t))},[v("img",{src:e.app.photo,alt:""},null,8,["src"]),v("p",null,g(e.app.name),1)],8,["id"]))));Le.render=Se,Le.__scopeId="data-v-fbd9cda6";var Ae=i({components:{App:Le},setup:()=>({appList:["phone","messages","safari","settings"].map((e=>pe.find((t=>t.key==e))))})});const Te=y();w("data-v-1abd2e80");const _e={class:"dock"};b();const xe=Te(((o,n,s,l,c,r)=>{const p=e("App");return t(),a("div",_e,[(t(!0),a(k,null,f(o.appList,(e=>(t(),a(p,{key:e.key,app:e},null,8,["app"])))),128))])}));Ae.render=xe,Ae.__scopeId="data-v-1abd2e80";var Ce=i({props:{app:{type:Object,default:()=>({})}},setup(){const{dragStatus:e,gotouchstart:t,gotouchend:a}=ye();return{dragStatus:e,gotouchstart:t,gotouchend:a}}});const Ee=y()(((o,n,s,l,c,r)=>{const p=e("van-icon");return t(),a("div",{class:"app-box",onTouchstart:n[1]||(n[1]=(...e)=>o.gotouchstart&&o.gotouchstart(...e)),onTouchend:n[2]||(n[2]=(...e)=>o.gotouchend&&o.gotouchend(...e))},[v("div",{class:""+(o.dragStatus?"shake":""),style:{width:"100%",height:"100%"}},[o.dragStatus?(t(),a(p,{key:0,name:"clear",class:"close"})):L("",!0),S(o.$slots,"default",{},void 0,!0)],2)],32)}));Ce.render=Ee,Ce.__scopeId="data-v-8bd6f84a";var Me=i({setup(){A((()=>{window.WIDGET={CONFIG:{layout:"1",width:"337",height:"152",background:"1",dataColor:"FFFFFF",modules:"10",borderRadius:"14",key:"bd944729128a411586b094b8ad992a74"}},((e,t)=>{const a=document.createElement("script");a.type="text/javascript",a.src=e,document.body.appendChild(a),a.onload=t||{}})("https://widget.qweather.net/standard/static/js/he-standard-common.js?v=2.0",(()=>{T((()=>{let e=document.querySelector("#he-plugin-standard");e&&(e.style.width="100%")}))}))}))},methods:{navTo(){window.open("https://widget-page.qweather.net/h5/index.html?md=0123456&bg=1&lc=accu&key=6ccfdfa816e341a895dfe493d5d1f585&demo=true&v=_1619672129584")}}});const Ne=y();w("data-v-9fc31f9a");const Re={class:"weather"},Be=v("div",{id:"he-plugin-standard"},null,-1),Pe=v("p",null,"天气",-1);b();const De=Ne(((e,o,n,s,l,c)=>(t(),a("div",Re,[Be,Pe]))));Me.render=De,Me.__scopeId="data-v-9fc31f9a";C.use([E]);let He=l(null);const Ie=()=>{const e=l(0),t=l(0);return A((()=>{T((()=>{He.value=new C(".my-swipe",{pagination:{el:".swiper-pagination"},loop:!1,watchSlidesProgress:!0,on:{progress:(a,o)=>{let n=Number((50*o).toFixed(2));Math.abs(n-e.value)>20?t.value=.3:t.value=0,e.value=n}}})}))})),{containerBgX:e,containerBgDuration:t,swiperMain:He}},{swiperMain:je}=Ie();var Oe=i({name:"Home",components:{Dock:Ae,HandleApp:Ce},setup(){const{dragStatus:e,changeDragStatus:t}=ye(),{appsList:a,curColumn:o}=(()=>{const e=l(0),t=Q("--grid-row-gap"),a=Q("--app-height"),o=Q("--app-width"),n=Q("--grid-col-gap"),{localApp:s,myApplist:c}=fe(),r=l([[]]),p=()=>{const s=document.querySelector(".swiper-slide");if(!s)return;const{width:l,height:p}=s.getBoundingClientRect(),i=Math.floor((p+t)/(a+t)),u=Math.floor((l+n)/(o+n));e.value=u;const d=i*u;let m=0,h=0,v=[[]];c.value.forEach((e=>{switch(e.type){case ee.App:h+=1,e.component=x(Le);break;case ee.Weather:h+=2*u,e.component=x(Me),e.style=`grid-column-start: 1;grid-column-end: ${u+1};grid-row-start:1;grid-row-end:3`;break;default:h+=1,e.component=x(Le)}h>d?(h=0,v.push([e]),m+=1):v[m].push(e)})),r.value=v};return _(s.value,(()=>{p()})),A((()=>{window.addEventListener("resize",p),p()})),{appsList:r,curColumn:e}})(),{containerBgX:n,containerBgDuration:s,swiperMain:c}=Ie();return A((()=>{(e=>{let t=document.querySelector(e),a=0,o={animation:500,ghostClass:"box-ghost",forceFallback:!1,onStart:function(e){a=e.originalEvent.targetTouches[0].clientX-e.item.offsetLeft,a=e.item.offsetWidth/2-a,je.value.allowTouchMove=!1},onMove:function(e){const t=e.relatedRect.left+e.relatedRect.width/3,o=e.relatedRect.left+e.relatedRect.width/3*2,n=e.relatedRect.top+e.relatedRect.height/5,s=e.relatedRect.top+e.relatedRect.height/5*4,l=e.originalEvent.clientX+a,c=e.originalEvent.clientY;if(e.willInsertAfter){if(l>o)return e.related.classList.remove("changeToBox"),!0}else if(l<t)return e.related.classList.remove("changeToBox"),!0;return t<l&&l<o&&c>n&&c<s?e.related.classList.add("changeToBox"):e.related.classList.remove("changeToBox"),!1},onEnd:function(e){let t=n.toArray();console.log(t),je.value.allowTouchMove=!0}};const n=M.create(t,o)})(".grid-box")})),_(a.value,(()=>{T((()=>{var e;null==(e=c.value)||e.update()}))})),{curColumn:o,appsList:a,containerBgX:n,containerBgDuration:s,closeDarg:()=>{0!=e.value&&t()},dragStatus:e}}});const $e=y();w("data-v-a264e39c");const Fe={class:"swiper-container my-swipe"},Ve={class:"swiper-wrapper"},qe=v("div",{class:"swiper-pagination"},null,-1);b();const Ye=$e(((o,n,s,l,c,r)=>{const p=e("HandleApp"),i=e("Dock");return t(),a("div",{class:"container",style:`background-position-x: ${o.containerBgX}%;transition: background ${o.containerBgDuration}s;`},[o.dragStatus?(t(),a("div",{key:0,class:"closeHandle",onClick:n[1]||(n[1]=(...e)=>o.closeDarg&&o.closeDarg(...e))},"完成")):L("",!0),v("div",Fe,[v("div",Ve,[(t(!0),a(k,null,f(o.appsList,((e,s)=>(t(),a("div",{class:"swiper-slide",key:s},[v("div",{class:"grid-box",onClick:n[2]||(n[2]=N(((...e)=>o.closeDarg&&o.closeDarg(...e)),["self"])),style:`grid-template-columns: repeat(${o.curColumn}, var(--app-width))`},[(t(!0),a(k,null,f(e,(e=>(t(),a(p,{key:e.key,style:e.style,app:e,"data-id":e.key},{default:$e((()=>[(t(),a(R(e.component),{app:e},null,8,["app"]))])),_:2},1032,["style","app","data-id"])))),128))],4)])))),128))]),qe]),v(i)],4)}));Oe.render=Ye,Oe.__scopeId="data-v-a264e39c";var Ue=i({emits:["closeApp"],setup(e,t){const a=B(),o=u(),n=l(!0),s=r((()=>{var e;return ne[(null==(e=a.meta)?void 0:e.style)||"white"]})),{changeRouterHistory:c}=be();_((()=>a.path),(()=>{"home"!=a.name&&a.matched.length&&a.matched[0].name&&c({type:"add",appName:a.matched[0].name,value:a.fullPath})}));return{fade:n,color:s,closeApp:async()=>{n.value=!1,t.emit("closeApp"),setTimeout((()=>{o.push({name:"home"}),n.value=!0}),500)}}}});const We=y();w("data-v-bb32f72a");const Xe={class:"app-layout",ref:"appBox"},ze={t:"1620283141610",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"2038",width:"200",height:"200"},Ge=v("div",{id:"routerView"},"系统加载中...",-1);b();const Je=We(((o,n,s,l,c,r)=>{const p=e("router-view");return t(),a("div",Xe,[v("div",{class:"close",onClick:n[1]||(n[1]=(...e)=>o.closeApp&&o.closeApp(...e))},[(t(),a("svg",ze,[v("path",{d:"M512 0C228.96 0 0 228.96 0 512c0 283.04 228.96 512 512 512 283.04 0 512-228.96 512-512C1024 228.96 795.04 0 512 0z m0 903.52c-216.8 0-391.52-174.72-391.52-391.52 0-216.8 174.72-391.52 391.52-391.52 216.8 0 391.52 174.72 391.52 391.52 0 216.8-174.72 391.52-391.52 391.52z",fill:o.color,"p-id":"2039"},null,8,["fill"]),v("path",{d:"M316.16 512c0 108.16 87.68 195.84 195.84 195.84S707.84 620.16 707.84 512 620.16 316.16 512 316.16 316.16 403.84 316.16 512z m0 0",fill:o.color,"p-id":"2040"},null,8,["fill"])]))]),o.$route.meta&&"app"==o.$route.meta.type?L("",!0):(t(),a(p,{key:0},{default:We((({Component:e})=>[v(P,{name:"fade"},{default:We((()=>[(t(),a(R(e),{ref:"component"},null,512))])),_:2},1024)])),_:1})),v(P,{name:"fade"},{default:We((()=>[Ge])),_:1})],512)}));Ue.render=Je,Ue.__scopeId="data-v-bb32f72a";const Qe=D.create({baseURL:"/",timeout:1e4});Qe.interceptors.request.use((e=>(e.headers["Content-Type"]="application/x-www-form-urlencoded","post"===e.method&&e.data?(e.data=JSON.stringify(e.data),e.headers["Content-Type"]="application/json",e):e)),(e=>(console.log(e),Promise.reject(e)))),Qe.interceptors.response.use((e=>e.data),(e=>(console.log("err"+e),H(e.message),Promise.reject(e))));const Ke=[1,2,3,4,5,6,7,8,9];var Ze=i({props:{password:{type:String,default:""}},emits:["callback","close"],setup(e,t){const a=l([]),o=l(!1),n=()=>{let n=a.value.join("");e.password&&e.password!=n?(o.value=!0,setTimeout((()=>{o.value=!1,a.value=[],t.emit("callback",n,!1)}),500)):(a.value=[],t.emit("callback",n,!0))};return{keys:Ke,inputList:a,dance:o,ketDown:e=>{a.value.length>=6||(a.value.push(e),6==a.value.length&&n())},cancel:()=>{t.emit("close")},remove:()=>{a.value.pop()}}}});const et=y();w("data-v-44182a9e");const tt={class:"keyboard"},at=v("div",{class:"btn empty"},null,-1),ot=v("div",{class:"btn empty"},null,-1),nt={class:"handle"},st=v("div",null,null,-1);b();const lt=et(((e,o,n,s,l,c)=>(t(),a("div",null,[v("div",{class:{input:!0,dance:e.dance}},[(t(),a(k,null,f(6,(t=>v("div",{class:{garden:!0,fill:e.inputList.length>=t},key:t},null,2))),64))],2),v("div",tt,[(t(!0),a(k,null,f(e.keys,(o=>(t(),a("div",{class:"btn",key:o,onTouchend:t=>e.ketDown(o)},g(o),41,["onTouchend"])))),128)),at,v("div",{class:"btn",onTouchend:o[1]||(o[1]=t=>e.ketDown(0))},"0",32),ot]),v("div",nt,[S(e.$slots,"default",{},(()=>[st]),{}),I(v("div",{onClick:o[2]||(o[2]=(...t)=>e.remove&&e.remove(...t))},"删除",512),[[j,e.inputList.length]]),I(v("div",{onClick:o[3]||(o[3]=(...t)=>e.cancel&&e.cancel(...t))},"取消",512),[[j,!e.inputList.length]])])]))));Ze.render=lt,Ze.__scopeId="data-v-44182a9e";var ct=i({components:{numberLock:Ze},emits:["openLock","cancel"],setup(e,t){const{lockPwd:a}=he();return{password:a,op:()=>{t.emit("openLock")},cancel:()=>{t.emit("cancel")},lockCallback:(e,a)=>{a&&t.emit("openLock")}}}});const rt=y();w("data-v-07215331");const pt={class:"container"},it=v("div",{class:"top"},"输入密码",-1);b();const ut=rt(((o,n,s,l,c,r)=>{const p=e("numberLock");return t(),a("div",pt,[it,v(p,{password:o.password,onCallback:o.lockCallback,onClose:o.cancel},{default:rt((()=>[v("div",{onClick:n[1]||(n[1]=(...e)=>o.op&&o.op(...e))},"紧急操作")])),_:1},8,["password","onCallback","onClose"])])}));ct.render=ut,ct.__scopeId="data-v-07215331";const dt=80,mt="#fff",ht="#27ae60",vt="#c0392b",gt=10,yt=30,kt=30;const ft=(e,t,a)=>Math.sqrt(Math.pow(a.x-e,2)+Math.pow(a.y-t,2))<=dt/2;var wt=i({props:{password:{type:String,default:""}},emits:["callback"],setup(e,t){const{canvasEl:a,canvasMoveStart:o,canvasMove:n,canvasMoveEnd:s}=function(){const e=c({width:0,height:0,left:0,top:0}),t=l([]),a=l([]);let o,n=l(null);const s=()=>{const a=n.value;if(a){if(o=a.getContext("2d"),e.width=a.width,e.height=a.height,e.left=a.offsetLeft,e.top=a.offsetTop,t.value=[],9!=t.value.length)for(let e=0;e<9;e++){let{x:a,y:o}=r(e),n={x:a,y:o,status:!1,value:e};t.value.push(n)}o.clearRect(0,0,e.width,e.height),t.value.forEach((e=>{p(e)}))}},r=e=>({x:dt*(e%3)+yt*(e%3)+dt/2,y:dt*Math.floor(e/3)+kt*Math.floor(e/3)+dt/2}),p=(e,t=!0)=>{let a=mt;e.status&&(a=t?ht:vt),o.beginPath(),o.arc(e.x,e.y,dt/2-1,0,2*Math.PI,!0),o.strokeStyle=a,o.lineWidth=1,o.stroke(),o.beginPath(),o.arc(e.x,e.y,gt/2,0,2*Math.PI,!0),o.fillStyle=a,o.fill()},i=(n,s,l,c=!0)=>{o.clearRect(0,0,e.width,e.height),o.save(),o.beginPath(),o.strokeStyle=c?ht:vt,o.lineWidth=6,o.lineJoin="round",o.lineCap="round",a.value.forEach(((e,a)=>{0==a?o.moveTo(t.value[e-1].x,t.value[e-1].y):o.lineTo(t.value[e-1].x,t.value[e-1].y)})),l&&a.value.length&&o.lineTo(n,s),o.stroke(),o.restore(),t.value.forEach((e=>{ft(n,s,e)&&!e.status&&(a.value.push(e.value+1),e.status=!0),p(e,c)}))};return A(s),{canvasEl:n,canvasMoveStart:t=>{let{pageX:a,pageY:o}=t.targetTouches[0];a-=e.left,o-=e.top,i(a,o,!0)},canvasMove:t=>{let{pageX:a,pageY:o}=t.targetTouches[0];a-=e.left,o-=e.top,i(a,o,!0)},canvasMoveEnd:(e,t)=>{let o=a.value.join(""),n=!e||o==e;i(0,0,!1,n),t.emit("callback",o,n),a.value=[],setTimeout((()=>{s()}),300)}}}();return{canvasEl:a,canvasMoveStart:o,canvasMove:n,canvasMoveEnd:()=>{s(e.password,t)}}}});const bt=y()(((e,o,n,s,l,c)=>(t(),a("canvas",{class:"lock-canvas",ref:"canvasEl",width:"300",height:"300",onTouchstart:o[1]||(o[1]=(...t)=>e.canvasMoveStart&&e.canvasMoveStart(...t)),onTouchmove:o[2]||(o[2]=(...t)=>e.canvasMove&&e.canvasMove(...t)),onTouchend:o[3]||(o[3]=(...t)=>e.canvasMoveEnd&&e.canvasMoveEnd(...t))},null,544))));wt.render=bt,wt.__scopeId="data-v-4a5eff36";var Lt=i({components:{SlideLock:wt},emits:["openLock","cancel"],setup(e,t){const{lockPwd:a}=he(),o=()=>{t.emit("openLock")};return{password:a,lockCb:(e,t)=>{t&&o()},op:o,cancel:()=>{t.emit("cancel")}}}});const St=y();w("data-v-819ee4a4");const At={class:"container"},Tt=v("div",{class:"top"},"手势解锁",-1),_t={class:"handle"};b();const xt=St(((o,n,s,l,c,r)=>{const p=e("SlideLock");return t(),a("div",At,[Tt,v(p,{password:o.password,onCallback:o.lockCb},null,8,["password","onCallback"]),v("div",_t,[v("div",{onClick:n[1]||(n[1]=(...e)=>o.op&&o.op(...e))},"紧急操作"),v("div",{onClick:n[2]||(n[2]=(...e)=>o.cancel&&o.cancel(...e))},"取消")])])}));Lt.render=xt,Lt.__scopeId="data-v-819ee4a4";const Ct=["日","一","二","三","四","五","六"];function Et(){const e=l("");return Qe({url:"https://v1.hitokoto.cn/",method:"get"}).then((t=>{e.value=t.hitokoto})),e}var Mt=i({components:{NumberView:ct,SlideView:Lt},setup(){const e=l(le.Normal),{lockPwd:t,changeLockState:a}=he(),{time:o,date:n}=function(){let e=l(""),t=l("");const a=()=>{let a=new Date,o=a.getMonth()+1,n=a.getDate(),s=a.getHours();s=s<10?"0"+s:s;let l=a.getMinutes();l=l<10?"0"+l:l;let c=a.getDay();e.value=s+":"+l,t.value=o+"月"+n+"日 周"+Ct[c]};return a(),setTimeout(a,1e3),{time:e,date:t}}(),{transition:s,curBlurNum:c,translateY:r,windowHeight:p,touchStart:i}=function(e,t){const a=l(0),o=l(0),n=l(0),s=l(667|window.innerHeight),{lockType:c,changeLockState:r}=he();return{transition:a,curBlurNum:o,translateY:n,windowHeight:s,touchStart:l=>{let p=l.touches[0].pageY,i=0,u=0,d=e=>{a.value=0;let t=e.touches[0].pageY;i=p-t,u=Math.floor(i/(.8*s.value)*100)/10,o.value=Math.max(0,u),n.value=Math.max(0,i)},m=()=>{a.value=.3,i=i>.2*s.value?s.value:0,n.value=i,o.value=i?1:0,n.value&&setTimeout((()=>{t.value&&c.value!=le.Normal?e.value=c.value:r()}),100),document.removeEventListener("touchmove",d),document.removeEventListener("touchend",m)};document.addEventListener("touchmove",d),document.addEventListener("touchend",m)}}}(e,t),u=Et();return{lockStep:e,time:o,date:n,transition:s,curBlurNum:c,translateY:r,windowHeight:p,touchStart:i,LockType:le,tipsContent:u,openLock:()=>{setTimeout((()=>{a(),e.value=le.Normal}),100)},cancel:()=>{e.value=le.Normal}}}});const Nt=y();w("data-v-327ce7bd");const Rt=v("img",{src:"https://xluoyu.github.io/image-riverbed/iphone/background/background.jpg",alt:"",class:"bg"},null,-1),Bt={class:"top"},Pt=v("span",null,"向上滑动解锁",-1),Dt={class:"time-box"},Ht={class:"tips"};b();const It=Nt(((o,n,s,l,c,r)=>{const p=e("van-icon"),i=e("NumberView"),u=e("SlideView");return t(),a("div",{class:"lock",onTouchstart:n[1]||(n[1]=(...e)=>o.touchStart&&o.touchStart(...e))},[Rt,o.lockStep==o.LockType.Normal?(t(),a("div",{key:0,class:"notice-container",style:`-webkit-backdrop-filter: blur(${o.curBlurNum}px);transition: all ${o.transition}s;transform: translateY(-${o.translateY}px);`},[v("div",Bt,[v(p,{name:"lock",color:"#fff"}),Pt]),v("div",Dt,[v("h2",null,g(o.time),1),v("p",null,g(o.date),1),v("p",Ht,g(o.tipsContent),1)])],4)):L("",!0),o.lockStep==o.LockType.Number?(t(),a(i,{key:1,onOpenLock:o.openLock,onCancel:o.cancel},null,8,["onOpenLock","onCancel"])):L("",!0),o.lockStep==o.LockType.Slide?(t(),a(u,{key:2,onOpenLock:o.openLock,onCancel:o.cancel},null,8,["onOpenLock","onCancel"])):L("",!0)],32)}));Mt.render=It,Mt.__scopeId="data-v-327ce7bd";var jt=i({name:"App",components:{Home:Oe,Lock:Mt,AppLayout:Ue},setup(){const{lockStatus:e}=he(),t=l(!1),a=B();return{routeStatus:r((()=>!(t.value||!a.matched.length)&&"home"!=a.name)),lockStatus:e,closeApp:()=>{t.value=!0,setTimeout((()=>{t.value=!1}),600)},beforeEnter:e=>{let t=a.matched[0].name||"",o=document.querySelector(`#${String(t)}`),{top:n,left:s,width:l,height:c}=o.getBoundingClientRect(),r=c/2+n,p=l/2+s;e.style.transformOrigin=`${p}px ${r}px`}}}});const Ot={class:"page"};jt.render=function(o,n,s,l,c,r){const p=e("Lock"),i=e("Home"),u=e("app-layout");return t(),a("div",Ot,[o.lockStatus?(t(),a(p,{key:0})):L("",!0),v(i),v(P,{name:"app",onBeforeEnter:o.beforeEnter},{default:O((()=>[I(v(u,{onCloseApp:o.closeApp},null,8,["onCloseApp"]),[[j,o.routeStatus]])])),_:1},8,["onBeforeEnter"])])};var $t={install:e=>{e.use($).use(F).use(V).use(H).use(q).use(Y).use(d).use(p)}};U();const Ft=W(jt);Ft.use(Z),Ft.use(ie),Ft.use($t),Ft.mount("#app");export{le as I,Ze as _,wt as a,he as u};
